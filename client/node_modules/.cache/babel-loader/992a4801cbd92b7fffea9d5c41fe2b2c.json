{"ast":null,"code":"var _jsxFileName = \"/Users/skykim/Desktop/workspace/RS-company/Apollo-GraphQL-NodeJS-React/client/src/components/Recipe/AddRecipe.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Mutation } from 'react-apollo';\nimport { ADD_RECIPE, GET_ALL_RECIPES } from '../../queries/index';\nimport Error from '../Error';\nconst initialState = {\n  name: \"\",\n  instructions: \"\",\n  category: \"Breakfast\",\n  description: \"\",\n  username: \"\"\n};\n\nclass AddRecipe extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = { ...initialState\n    };\n\n    this.clearState = () => {\n      this.setState({ ...initialState\n      });\n    };\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target; // console.log(name, ':', value);\n\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handSubmit = (event, addRecipe) => {\n      event.preventDefault();\n      addRecipe().then(({\n        data\n      }) => {\n        console.log(data);\n      });\n      this.clearState();\n      this.props.history.push(\"/\");\n    };\n\n    this.validateForm = () => {\n      const {\n        name,\n        category,\n        description,\n        instructions\n      } = this.state;\n      const isInvalid = !name || !category || !description || !instructions;\n      return isInvalid;\n    };\n\n    this.updateCache = (cache, {\n      data: {\n        addRecipe\n      }\n    }) => {\n      const {\n        getAllRecipes\n      } = cache.readQuery({\n        query: GET_ALL_RECIPES\n      });\n      cache.writeQuery({\n        query: GET_ALL_RECIPES,\n        data: {\n          getAllRecipes: [addRecipe, ...getAllRecipes]\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    // console.log(this.props.session.getCurrentUser.username);\n    this.setState({// username: this.props.session.getCurrentUser.username\n    });\n  }\n\n  render() {\n    const {\n      name,\n      category,\n      description,\n      instructions,\n      username\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Mutation, {\n      mutation: ADD_RECIPE,\n      variables: {\n        name,\n        category,\n        description,\n        instructions,\n        username\n      },\n      update: this.updateCache,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, (addRecipe, {\n      data,\n      loading,\n      error\n    }) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }\n      }, \"Add AddRecipe\"), /*#__PURE__*/React.createElement(\"form\", {\n        className: \"form\",\n        onSubmit: event => this.handSubmit(event, addRecipe),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Recipe Name\",\n        onChange: this.handleChange,\n        value: name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"select\", {\n        name: \"category\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Breakfast\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 33\n        }\n      }, \" Breakfast \"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Breakfast\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 33\n        }\n      }, \" Lunch \"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Breakfast\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 33\n        }\n      }, \" Dinner \"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Breakfast\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 33\n        }\n      }, \" Snack \")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        name: \"description\",\n        placeholder: \"Add description\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"textarea\", {\n        name: \"instructions\",\n        placeholder: \"Add Instructions\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        disabled: loading || this.validateForm(),\n        type: \"submit\",\n        className: \"button-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 29\n        }\n      }, \" Submit \"), error && /*#__PURE__*/React.createElement(Error, {\n        error: error,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 39\n        }\n      })));\n    });\n  }\n\n}\n\n;\nexport default withRouter(AddRecipe);","map":{"version":3,"sources":["/Users/skykim/Desktop/workspace/RS-company/Apollo-GraphQL-NodeJS-React/client/src/components/Recipe/AddRecipe.js"],"names":["React","withRouter","Mutation","ADD_RECIPE","GET_ALL_RECIPES","Error","initialState","name","instructions","category","description","username","AddRecipe","Component","state","clearState","setState","handleChange","event","value","target","handSubmit","addRecipe","preventDefault","then","data","console","log","props","history","push","validateForm","isInvalid","updateCache","cache","getAllRecipes","readQuery","query","writeQuery","componentDidMount","render","loading","error"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {withRouter} from 'react-router-dom';\n\nimport {Mutation} from 'react-apollo';\nimport { ADD_RECIPE, GET_ALL_RECIPES } from '../../queries/index';\nimport Error from '../Error';\n\n\nconst initialState = {\n    name : \"\",\n    instructions : \"\",\n    category: \"Breakfast\",\n    description: \"\",\n    username: \"\"\n};\n\nclass AddRecipe extends React.Component {\n    state = { ...initialState };\n\n    clearState = () => {\n        this.setState({ ...initialState});\n    }\n\n    componentDidMount() {\n        // console.log(this.props.session.getCurrentUser.username);\n        this.setState({\n            // username: this.props.session.getCurrentUser.username\n        })\n    }\n\n    handleChange = event => {\n        const {name, value} = event.target;\n        // console.log(name, ':', value);\n        this.setState({\n            [name] : value\n\n        });\n    }\n\n    handSubmit = (event, addRecipe ) => {\n        event.preventDefault();\n        addRecipe().then(({ data }) => {\n            console.log(data);\n        });\n        this.clearState();\n        this.props.history.push(\"/\");\n    }\n\n    validateForm = () => {\n        const { name, category, description, instructions } = this.state;\n        const isInvalid = !name || !category || !description || !instructions;\n        return isInvalid;\n    }\n\n    updateCache = (cache, { data: { addRecipe } }) => {\n        const { getAllRecipes } = cache.readQuery({ query: GET_ALL_RECIPES });\n    \n        cache.writeQuery({\n          query: GET_ALL_RECIPES,\n          data: {\n            getAllRecipes: [addRecipe, ...getAllRecipes]\n          }\n        });\n      };\n\n    render(){\n        const{name, category, description, instructions, username} = this.state;\n   \n       return(\n            <Mutation mutation={ADD_RECIPE} variables={{ name, category, description, instructions, username }} update={this.updateCache}>\n            {(addRecipe, { data, loading, error }) => {\n               return (\n                    <div className=\"App\"> \n                        <h2 className=\"App\">Add AddRecipe</h2>\n                        <form className=\"form\" onSubmit={ event => this.handSubmit(event, addRecipe)}>\n                            <input type=\"text\" name=\"name\" placeholder=\"Recipe Name\" onChange={this.handleChange} value={name} />\n                            <select name=\"category\" onChange={this.handleChange}>\n                                <option value=\"Breakfast\"> Breakfast </option>\n                                <option value=\"Breakfast\"> Lunch </option>\n                                <option value=\"Breakfast\"> Dinner </option>\n                                <option value=\"Breakfast\"> Snack </option>\n                            </select>\n                            <input type=\"text\" name=\"description\" placeholder=\"Add description\" onChange={this.handleChange} />\n                            <textarea name=\"instructions\" placeholder=\"Add Instructions\" onChange={this.handleChange}></textarea>\n                            <button disabled={loading || this.validateForm()} type=\"submit\" className=\"button-primary\"> Submit </button>\n                            {error && <Error error={error}/> }\n                        </form>\n                    </div>\n            )\n        }}\n        </Mutation>\n       )\n\n    }\n};\n\nexport default withRouter(AddRecipe);"]},"metadata":{},"sourceType":"module"}